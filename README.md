# Monitoring-events-in-the-process
Modern software development technologies

Цель работы: Написать программу, которая осуществляет мониторинг вызова функций в процессе. Программа должна использовать технику Hook&Inject, которая заключается в том, чтобы заставить целевой процесс осуществить загрузку указанной DLL, которая, в свою очередь выполняет изменение таблиц с функциями DLL, осуществляя их перехват. При использовании такой техники есть возможность осуществлять мониторинг вызова заданных функций, а так же существует возможность подменять значения результата работы функции, меняя поведение целевого процесса.

Задача: Написать программу и dll библиотеку, которые позволяют:
  - Отслеживать вызов указанных заранее функций. Каждый вызов функции в целевом процессе должен сопровождаться печатью сообщения на консоль разрабатываемой программы. Распечатанное сообщение должно содержать имя функции и метку времени;
  - Изменять поведение функции FindFirstFile, FindNextFile, CreateFile таким образом, что для процесса пропадает указанный заранее файл. Для изменения поведения достаточно изменять значения, возвращаемые этими функциями в соответствии с определенными входными параметрами. Должно работать для cmd.exe в 32х битной версии;

Требования:
  - Программа должна компилироваться Visual Studio;
  - Программа требует привилегий администратора для своей работы;
  - Программа должна обладать интерфейсом командной строки;
  - Программа должна предлагать следующие действия:
    -	–pid < Target_Process_PID> – целевой процесс выбирается по значению PID;
    -	–name <Target_Process_Name> – целевой процесс выбирается по имени;
    -	–func <Function_Name> – имя функции, вызов которой требуется отследить;
    -	–hide <File_Name> – имя файла, который надо скрыть от процесса;
  - Считается, что доступны следующие сценарии запуска программы:
    -	Monitor.exe –pid 123 –func CreateFile;
    -	Monitor.exe –name explorer.exe –func CreateFile;
    -	Monitor.exe –name explorer.exe –hide “C:\hello.txt”;

Рекомендации: В качестве функции перехвата рекомендуется использовать библиотеку detours.

Ресурсы:
  - Исходные тексты: 
    - http://jacquelin.potier.free.fr/winapioverride32/;
  - Теоритические сведения: 
    - http://www.codeproject.com/Articles/2082/API-hooking-revealed;
    - Джеффри Рихтер: Windows via C/C++;

Ссылка на видео с частичным выполнением: https://drive.google.com/file/d/1gXBfXDDhIQEguJBnQ11Gq_bCCsVXD2S_/view?usp=sharing.
